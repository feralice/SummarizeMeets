<div class="page">
  <app-header></app-header>

  <main class="container">
    <section class="hero">
      <h1>Simplifique suas reuniÃµes</h1>
      <p>Envie um vÃ­deo e receba um resumo em minutos</p>
    </section>

    <app-file-uploader
      [isProcessing]="isProcessing"
      (fileSelected)="onFileSelected($event)"
      (fileRemoved)="onFileRemoved()"
      (generateSummary)="onGenerateSummary()"
    ></app-file-uploader>

    <div *ngIf="selectedFile" class="meeting-title">
      <label for="meetingTitle">Nome da reuniÃ£o (opcional)</label>
      <input
        id="meetingTitle"
        type="text"
        placeholder="Ex: ReuniÃ£o de Planejamento Q1"
        [(ngModel)]="meetingTitle"
      />
    </div>

    <div *ngIf="error" class="error-message">
      <div class="error-icon">âš ï¸</div>
      <div class="error-content">
        <h3>Erro ao processar</h3>
        <p>{{ error }}</p>
        <button class="btn-text" (click)="error = null">Fechar</button>
      </div>
    </div>

    <app-processing-indicator
      *ngIf="showProcessing"
      [message]="'Analisando: ' + (selectedFile?.name || 'seu arquivo')"
      [subMessage]="'O processamento pode levar alguns minutos dependendo do tamanho do arquivo'"
      [currentStage]="currentStage"
      [progress]="progress"
    ></app-processing-indicator>

    <div *ngIf="analysisResult && !showProcessing" class="result-preview">
      <div class="result-header">
        <h3>ğŸ“‹ Resumo Gerado com Sucesso!</h3>
        <span class="success-badge">âœ… Pronto</span>
      </div>

      <p>{{ analysisResult | slice : 0 : 200 }}...</p>

      <div class="result-actions">
        <button class="btn-text" (click)="showFullResult()">ğŸ“„ Ver resumo completo</button>
        <button class="btn-text" (click)="onFileRemoved()">ğŸ—‘ï¸ Limpar e fazer novo upload</button>
      </div>
    </div>
  </main>
</div>
